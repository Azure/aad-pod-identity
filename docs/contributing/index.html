<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.75.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=alternate type=application/rss+xml href=https://azure.github.io/aad-pod-identity/docs/contributing/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/aad-pod-identity/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/aad-pod-identity/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/aad-pod-identity/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-192x192.png sizes=192x192><title>Contributing | Azure Active Directory Pod Identity for Kubernetes</title><meta property="og:title" content="Contributing"><meta property="og:description" content="The AAD Pod Identity project welcomes contributions and suggestions."><meta property="og:type" content="website"><meta property="og:url" content="https://azure.github.io/aad-pod-identity/docs/contributing/"><meta property="og:updated_time" content="2021-09-02T17:07:36-07:00"><meta property="og:site_name" content="Azure Active Directory Pod Identity for Kubernetes"><meta itemprop=name content="Contributing"><meta itemprop=description content="The AAD Pod Identity project welcomes contributions and suggestions."><meta name=twitter:card content="summary"><meta name=twitter:title content="Contributing"><meta name=twitter:description content="The AAD Pod Identity project welcomes contributions and suggestions."><link rel=preload href=/aad-pod-identity/scss/main.min.fbc3f081c4a76030d5aadfa83fde16b4e10de871bea1d0e592dccd7bfc3e5b64.css as=style><link href=/aad-pod-identity/scss/main.min.fbc3f081c4a76030d5aadfa83fde16b4e10de871bea1d0e592dccd7bfc3e5b64.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/aad-pod-identity/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Azure Active Directory Pod Identity for Kubernetes</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/aad-pod-identity/changelog/><span>Changelog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/aad-pod-identity/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/Azure/aad-pod-identity target=_blank><span>GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/aad-pod-identity/offline-search-index.01993b0b8b49bc46cdf04eeecd6a13e3c3a2cb45d91a3f95a571966aab6253651a42d50b5f238eaf93388c28ab4f64eccaf05a03f6bb73f2104b5252a109238c.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/aad-pod-identity/offline-search-index.01993b0b8b49bc46cdf04eeecd6a13e3c3a2cb45d91a3f95a571966aab6253651a42d50b5f238eaf93388c28ab4f64eccaf05a03f6bb73f2104b5252a109238c.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=aad-pod-identitydocs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class=collapse id=aad-pod-identitydocsgetting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsgetting-startedrole-assignment href=/aad-pod-identity/docs/getting-started/role-assignment/>Role Assignment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsgetting-startedinstallation href=/aad-pod-identity/docs/getting-started/installation/>Installation</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a></li><ul><li class=collapse id=aad-pod-identitydocsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazureidentity href=/aad-pod-identity/docs/concepts/azureidentity/>AzureIdentity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazureidentitybinding href=/aad-pod-identity/docs/concepts/azureidentitybinding/>AzureIdentityBinding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazureassignedidentity href=/aad-pod-identity/docs/concepts/azureassignedidentity/>AzureAssignedIdentity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazurepodidentityexception href=/aad-pod-identity/docs/concepts/azurepodidentityexception/>AzurePodIdentityException</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsmic href=/aad-pod-identity/docs/concepts/mic/>Managed Identity Controller (MIC)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsnmi href=/aad-pod-identity/docs/concepts/nmi/>Node Managed Identity (NMI)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsblock-diagram-and-design href=/aad-pod-identity/docs/concepts/block-diagram-and-design/>Block Diagram and Design</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/demo/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Demos</a></li><ul><li class=collapse id=aad-pod-identitydocsdemo><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemostandard_walkthrough href=/aad-pod-identity/docs/demo/standard_walkthrough/>Standard Walkthrough</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemotutorial href=/aad-pod-identity/docs/demo/tutorial/>AAD Pod Identity Tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemojava-blob href=/aad-pod-identity/docs/demo/java-blob/>Spring Boot + Azure Storage + AAD Pod Identity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemoquickstart href=/aad-pod-identity/docs/demo/quickstart/>Quickstart Demo</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/configure/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configurations</a></li><ul><li class=collapse id=aad-pod-identitydocsconfigure><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurematch_pods_in_namespace href=/aad-pod-identity/docs/configure/match_pods_in_namespace/>Match Pods in the Namespace</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureaad_pod_identity_on_kubenet href=/aad-pod-identity/docs/configure/aad_pod_identity_on_kubenet/>Deploy AAD Pod Identity in a Cluster with Kubenet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfiguredeploy_aad_pod_dedicated_sp href=/aad-pod-identity/docs/configure/deploy_aad_pod_dedicated_sp/>Deploy AAD Pod Identity with a Dedicated Service Principal</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfiguredeploy_in_openshift href=/aad-pod-identity/docs/configure/deploy_in_openshift/>Setup AAD Pod Identity on Azure RedHat OpenShift (ARO)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureapplication_exception href=/aad-pod-identity/docs/configure/application_exception/>Disable AAD Pod Identity for a specific Pod/Application</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureazure_identity_validation href=/aad-pod-identity/docs/configure/azure_identity_validation/>Azure Identity Validation using Gatekeeper</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurefeature_flags href=/aad-pod-identity/docs/configure/feature_flags/>Feature Flags</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurecustom_cloud href=/aad-pod-identity/docs/configure/custom_cloud/>Pod Identity in Custom Cloud</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurestandard_to_managed_mode href=/aad-pod-identity/docs/configure/standard_to_managed_mode/>Migrating from Standard to Managed Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurepod_identity_in_managed_mode href=/aad-pod-identity/docs/configure/pod_identity_in_managed_mode/>Pod Identity in Managed Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureprometheus_monitoring href=/aad-pod-identity/docs/configure/prometheus_monitoring/>Monitoring Pod Identity with Prometheus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureenable_psp_enabled_clusters href=/aad-pod-identity/docs/configure/enable_psp_enabled_clusters/>Enable PSP Clusters</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/best-practices/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Best Practices</a></li><ul><li class=collapse id=aad-pod-identitydocsbest-practices></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/known-issues/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Known Issues</a></li><ul><li class=collapse id=aad-pod-identitydocsknown-issues></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/contributing/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Contributing</a></li><ul><li class="collapse show" id=aad-pod-identitydocscontributing></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/troubleshooting/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a></li><ul><li class=collapse id=aad-pod-identitydocstroubleshooting></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/support/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Support</a></li><ul><li class=collapse id=aad-pod-identitydocssupport></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/code-of-conduct/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Code of Conduct</a></li><ul><li class=collapse id=aad-pod-identitydocscode-of-conduct></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/Azure/aad-pod-identity/edit/master/website/content/en/docs/Contributing/_index.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/Azure/aad-pod-identity/issues/new?title=Contributing" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href="https://github.com/Azure/aad-pod-identity/issues/new?assignees=&labels=bug&template=bug_report.md&title=/issues/new" target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#cla>CLA</a></li><li><a href=#development>Development</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#development-flow>Development flow</a></li></ul></li><li><a href=#test-standard>Test Standard</a><ul><li><a href=#unit-tests>Unit tests</a></li><li><a href=#end-to-end-tests>End-to-end tests</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://azure.github.io/aad-pod-identity/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://azure.github.io/aad-pod-identity/docs/contributing/>Contributing</a></li></ol></nav><div class=td-content><h1>Contributing</h1><div class=lead>The AAD Pod Identity project welcomes contributions and suggestions.</div><h2 id=cla>CLA</h2><p>The AAD Pod Identity project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit <a href=https://cla.microsoft.com>https://cla.microsoft.com</a>.</p><p>When you submit a pull request, a CLA-bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., label, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA.</p><h2 id=development>Development</h2><h3 id=prerequisites>Prerequisites</h3><ul><li>Go 1.17</li><li>Docker</li><li>an AKS cluster / AKS-Engine cluster</li><li>Helm 3</li><li>A container registry. One of the following would work:<ul><li>Dockerhub</li><li>Azure Container Registry (ACR)</li></ul></li></ul><h3 id=development-flow>Development flow</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/Azure/aad-pod-identity <span style=color:#4e9a06>${</span><span style=color:#000>GOPATH</span><span style=color:#4e9a06>}</span>/src/github.com/Azure/aad-pod-identity
<span style=color:#204a87>cd</span> <span style=color:#4e9a06>${</span><span style=color:#000>GOPATH</span><span style=color:#4e9a06>}</span>/src/github.com/Azure/aad-pod-identity

<span style=color:#204a87>export</span> <span style=color:#000>REGISTRY</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;RegistryName&gt;

<span style=color:#8f5902;font-style:italic># Build MIC and NMI images</span>
make image-mic image-nmi

<span style=color:#8f5902;font-style:italic># push images to your container registry</span>
make push-mic push-nmi

<span style=color:#8f5902;font-style:italic># install the above images on your cluster</span>
helm install aad-pod-identity manifest_staging/charts/aad-pod-identity <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>  --set image.repository<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>REGISTRY</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>  --set mic.tag<span style=color:#ce5c00;font-weight:700>=</span>v0.0.0-dev <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>  --set nmi.tag<span style=color:#ce5c00;font-weight:700>=</span>v0.0.0-dev
</code></pre></div><h2 id=test-standard>Test Standard</h2><h3 id=unit-tests>Unit tests</h3><p>Unit tests focus on testing individual units and components of aad-pod-identity and they don&rsquo;t require any additional services to execute. They should be fast and great for getting the first signal on whether the implementation works or not. To run unit tests:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>make unit-test
</code></pre></div><p>In most cases, pull requests should include an adequate amount of unit tests such that the code coverage of the pull request may not lessen the code coverage of the main branch.</p><h3 id=end-to-end-tests>End-to-end tests</h3><p>End-to-end testing tests whether the flow of aad-pod-identity from start to finish is behaving as expected. Following guidelines should be followed when developing E2E tests:</p><ul><li><p>Use the aad-pod-identity e2e test framework.</p></li><li><p>Define test spec reflecting real user workflow, e.g. <a href=https://github.com/Azure/aad-pod-identity/blob/5c9c5e541d6612c31af4d09dc0ec7654388cc076/test/e2e/single_identity_test.go#L33-L96>creation of AzureIdentity, AzureIdentityBinding and a pod that consumes the identity</a>.</p></li></ul><p>See <a href=https://github.com/Azure/aad-pod-identity/blob/master/test/e2e/README.md>test/e2e/README.md</a> on how to run the aad-pod-identity e2e test suite locally.</p><div class=section-index><hr class=panel-line></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/Azure/aad-pod-identity/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/Azure/aad-pod-identity/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified September 2, 2021: <a href=https://github.com/Azure/aad-pod-identity/commit/7f5dc805307411201b5c2d52c65957b1955a184f>chore: update to go 1.17 (#1153) (7f5dc80)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/Azure/aad-pod-identity><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Azure Compute OSS Upstream Team All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/aad-pod-identity/js/main.min.664f21bf5eb0c31ebc661e2616e6c63e0448cec6d5636d869957be423c3cb952.js integrity="sha256-Zk8hv16wwx68Zh4mFubGPgRIzsbVY22GmVe+Qjw8uVI=" crossorigin=anonymous></script></body></html>