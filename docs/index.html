<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.75.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=alternate type=application/rss+xml href=https://azure.github.io/aad-pod-identity/docs/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/aad-pod-identity/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/aad-pod-identity/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/aad-pod-identity/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/aad-pod-identity/favicons/android-192x192.png sizes=192x192><title>Documentation | Azure Active Directory Pod Identity for Kubernetes</title><meta property="og:title" content="Documentation"><meta property="og:description" content="Azure AD Pod Identity for Kubernetes"><meta property="og:type" content="website"><meta property="og:url" content="https://azure.github.io/aad-pod-identity/docs/"><meta property="og:site_name" content="Azure Active Directory Pod Identity for Kubernetes"><meta itemprop=name content="Documentation"><meta itemprop=description content="Azure AD Pod Identity for Kubernetes"><meta name=twitter:card content="summary"><meta name=twitter:title content="Documentation"><meta name=twitter:description content="Azure AD Pod Identity for Kubernetes"><link rel=preload href=/aad-pod-identity/scss/main.min.c241d16902fcbeeab5ca356980004882fb8ccc80f80f15bb0e794fd07f088a69.css as=style><link href=/aad-pod-identity/scss/main.min.c241d16902fcbeeab5ca356980004882fb8ccc80f80f15bb0e794fd07f088a69.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/aad-pod-identity/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Azure Active Directory Pod Identity for Kubernetes</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/aad-pod-identity/changelog/><span>Changelog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/aad-pod-identity/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/Azure/aad-pod-identity target=_blank><span>GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/aad-pod-identity/offline-search-index.7922b614be74ac863c7f1d4c9c786655bb8bfcd2dbd022ab2826589703e15df54991e8380a76e55a91e1bce5c449a6d1e0332eac69aa905e6f3127b68250cdd1.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/aad-pod-identity/offline-search-index.7922b614be74ac863c7f1d4c9c786655bb8bfcd2dbd022ab2826589703e15df54991e8380a76e55a91e1bce5c449a6d1e0332eac69aa905e6f3127b68250cdd1.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=aad-pod-identitydocs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/getting-started/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class="collapse show" id=aad-pod-identitydocsgetting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsgetting-startedrole-assignment href=/aad-pod-identity/docs/getting-started/role-assignment/>Role Assignment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsgetting-startedinstallation href=/aad-pod-identity/docs/getting-started/installation/>Installation</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/concepts/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Concepts</a></li><ul><li class="collapse show" id=aad-pod-identitydocsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazureidentity href=/aad-pod-identity/docs/concepts/azureidentity/>AzureIdentity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazureidentitybinding href=/aad-pod-identity/docs/concepts/azureidentitybinding/>AzureIdentityBinding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazureassignedidentity href=/aad-pod-identity/docs/concepts/azureassignedidentity/>AzureAssignedIdentity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsazurepodidentityexception href=/aad-pod-identity/docs/concepts/azurepodidentityexception/>AzurePodIdentityException</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsmic href=/aad-pod-identity/docs/concepts/mic/>Managed Identity Controller (MIC)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsnmi href=/aad-pod-identity/docs/concepts/nmi/>Node Managed Identity (NMI)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconceptsblock-diagram-and-design href=/aad-pod-identity/docs/concepts/block-diagram-and-design/>Block Diagram and Design</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/demo/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Demos</a></li><ul><li class="collapse show" id=aad-pod-identitydocsdemo><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemostandard_walkthrough href=/aad-pod-identity/docs/demo/standard_walkthrough/>Standard Walkthrough</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemotutorial href=/aad-pod-identity/docs/demo/tutorial/>AAD Pod Identity Tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemojava-blob href=/aad-pod-identity/docs/demo/java-blob/>Spring Boot + Azure Storage + AAD Pod Identity</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsdemoquickstart href=/aad-pod-identity/docs/demo/quickstart/>Quickstart Demo</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/configure/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Configurations</a></li><ul><li class="collapse show" id=aad-pod-identitydocsconfigure><a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurematch_pods_in_namespace href=/aad-pod-identity/docs/configure/match_pods_in_namespace/>Match Pods in the Namespace</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureaad_pod_identity_on_kubenet href=/aad-pod-identity/docs/configure/aad_pod_identity_on_kubenet/>Deploy AAD Pod Identity in a Cluster with Kubenet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfiguredeploy_aad_pod_dedicated_sp href=/aad-pod-identity/docs/configure/deploy_aad_pod_dedicated_sp/>Deploy AAD Pod Identity with a Dedicated Service Principal</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfiguredeploy_in_openshift href=/aad-pod-identity/docs/configure/deploy_in_openshift/>Setup AAD Pod Identity on Azure RedHat OpenShift (ARO)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureapplication_exception href=/aad-pod-identity/docs/configure/application_exception/>Disable AAD Pod Identity for a specific Pod/Application</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureazure_identity_validation href=/aad-pod-identity/docs/configure/azure_identity_validation/>Azure Identity Validation using Gatekeeper</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurefeature_flags href=/aad-pod-identity/docs/configure/feature_flags/>Feature Flags</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurecustom_cloud href=/aad-pod-identity/docs/configure/custom_cloud/>Pod Identity in Custom Cloud</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurestandard_to_managed_mode href=/aad-pod-identity/docs/configure/standard_to_managed_mode/>Migrating from Standard to Managed Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigurepod_identity_in_managed_mode href=/aad-pod-identity/docs/configure/pod_identity_in_managed_mode/>Pod Identity in Managed Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureprometheus_monitoring href=/aad-pod-identity/docs/configure/prometheus_monitoring/>Monitoring Pod Identity with Prometheus</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-aad-pod-identitydocsconfigureenable_psp_enabled_clusters href=/aad-pod-identity/docs/configure/enable_psp_enabled_clusters/>Enable PSP Clusters</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/best-practices/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Best Practices</a></li><ul><li class="collapse show" id=aad-pod-identitydocsbest-practices></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/known-issues/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Known Issues</a></li><ul><li class="collapse show" id=aad-pod-identitydocsknown-issues></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/contributing/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Contributing</a></li><ul><li class="collapse show" id=aad-pod-identitydocscontributing></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/troubleshooting/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Troubleshooting</a></li><ul><li class="collapse show" id=aad-pod-identitydocstroubleshooting></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/support/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Support</a></li><ul><li class="collapse show" id=aad-pod-identitydocssupport></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/aad-pod-identity/docs/code-of-conduct/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Code of Conduct</a></li><ul><li class="collapse show" id=aad-pod-identitydocscode-of-conduct></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/Azure/aad-pod-identity/edit/master/website/content/en/docs/_index.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/Azure/aad-pod-identity/issues/new?title=Documentation" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href="https://github.com/Azure/aad-pod-identity/issues/new?assignees=&labels=bug&template=bug_report.md&title=/issues/new" target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#-announcement>📣 Announcement</a></li><li><a href=#breaking-changes>Breaking Changes</a><ul><li><a href=#v184>v1.8.4</a></li><li><a href=#v180>v1.8.0</a></li><li><a href=#v175>v1.7.5</a></li><li><a href=#v172>v1.7.2</a></li><li><a href=#v171>v1.7.1</a></li><li><a href=#v170>v1.7.0</a></li><li><a href=#v160>v1.6.0</a></li><li><a href=#azureidentity><code>AzureIdentity</code></a></li><li><a href=#azureidentitybinding><code>AzureIdentityBinding</code></a></li><li><a href=#azurepodidentityexception><code>AzurePodIdentityException</code></a></li></ul></li><li><a href=#ready-to-get-started>Ready to get started?</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class="breadcrumb-item active" aria-current=page><a href=https://azure.github.io/aad-pod-identity/docs/>Documentation</a></li></ol></nav><div class=td-content><h1>Documentation</h1><h2 id=-announcement>📣 Announcement</h2><p><strong>❗ IMPORTANT</strong>: As of Monday 10/24/2022, AAD Pod Identity is <strong>deprecated</strong>. As mentioned in the <a href=https://cloudblogs.microsoft.com/opensource/2022/01/18/announcing-azure-active-directory-azure-ad-workload-identity-for-kubernetes/>announcement</a>, AAD Pod Identity has been replaced with <a href=https://azure.github.io/azure-workload-identity>Azure Workload Identity</a>. Going forward, we will no longer add new features or bug fixes to this project in favor of Azure Workload Identity, which reached <a href=https://azure.microsoft.com/en-us/updates/ga-azure-active-directory-workload-identity-with-aks-2/>General Availability (GA) in Azure Kubernetes Service (AKS)</a>. We will provide CVE patches until September 2023, at which time the project will be archived. <strong>There will be no new releases after September 2023.</strong></p><p>AAD Pod Identity enables Kubernetes applications to access cloud resources securely with <a href=https://azure.microsoft.com/en-us/services/active-directory/>Azure Active Directory</a> using User-assigned managed identity and Service Principal.</p><blockquote><p>Note: Configuring system-assigned managed identity with AAD Pod Identity to access cloud resources is not supported.</p></blockquote><p>Using Kubernetes primitives, administrators configure identities and bindings to match pods. Then without any code modifications, your containerized applications can leverage any resource in the cloud that depends on AAD as an identity provider.</p><h2 id=breaking-changes>Breaking Changes</h2><h3 id=v184>v1.8.4</h3><p>The metadata header required flag is enabled by default to prevent SSRF attacks. Check <a href=./configure/feature_flags/#metadata-header-required-flag>Metadata Header Required</a> for more information. To disable the metadata header check, set <code>--metadata-header-required=false</code> in NMI <a href=https://github.com/Azure/aad-pod-identity/blob/v1.8.6/deploy/infra/deployment-rbac.yaml#L483>container args</a>.</p><h3 id=v180>v1.8.0</h3><ul><li><p>The API version of Pod Identity&rsquo;s CRDs (<code>AzureIdentity</code>, <code>AzureIdentityBinding</code>, <code>AzureAssignedIdentity</code>, <code>AzurePodIdentityException</code>) have been upgraded from <code>apiextensions.k8s.io/v1beta1</code> to <code>apiextensions.k8s.io/v1</code>. For Kubernetes clusters with &lt; 1.16, <code>apiextensions.k8s.io/v1</code> CRDs would not work. You can either:</p><ol><li>Continue using AAD Pod Identity v1.7.5 or</li><li>Upgrade your cluster to 1.16+, then upgrade AAD Pod Identity.</li></ol><p>If AAD Pod Identity was previously installed using Helm, subsequent <code>helm install</code> or <code>helm upgrade</code> would not upgrade the CRD API version from <code>apiextensions.k8s.io/v1beta1</code> to <code>apiextensions.k8s.io/v1</code> (although <code>kubectl get crd -oyaml</code> would display <code>apiextensions.k8s.io/v1</code> since the API server internally converts v1beta1 CRDs to v1, it lacks a <a href=https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/#specifying-a-structural-schema>structural schema</a>, which is what AAD Pod Identity introduced in v1.8.0). If you wish to upgrade to the official v1 CRDs for AAD Pod Identity:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl apply -f https://raw.githubusercontent.com/Azure/aad-pod-identity/master/charts/aad-pod-identity/crds/crd.yaml
</code></pre></div><p>With <a href=./configure/pod_identity_in_managed_mode>managed mode</a> enabled, you can remove the unused AzureAssignedIdentity CRD if you wish.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># MANAGED MODE ONLY!</span>
kubectl delete crd azureassignedidentities.aadpodidentity.k8s.io
</code></pre></div></li></ul><h3 id=v175>v1.7.5</h3><ul><li>AAD Pod Identity has dropped Helm 2 starting from chart version 4.0.0/app version 1.7.5. To install or upgrade to the latest version of AAD Pod Identity, please use Helm 3 instead. Refer to this <a href=https://helm.sh/blog/migrate-from-helm-v2-to-helm-v3/>guide</a> on how to migrate from Helm 2 to Helm 3.</li></ul><h3 id=v172>v1.7.2</h3><ul><li>The <code>forceNameSpaced</code> helm configuration variable is removed. Use <code>forceNamespaced</code> instead to configure pod identity to run in namespaced mode.</li></ul><h3 id=v171>v1.7.1</h3><ul><li><p><code>azureIdentities</code> in <code>values.yaml</code> is converted to a map instead of a list of identities.</p><p>The following is an example of the required change in <code>values.yaml</code> from helm chart 2.x.x to 3.x.x:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=color:#a40000>-azureIdentities:
</span><span style=color:#a40000>-  - name: &#34;azure-identity&#34;
</span><span style=color:#a40000>-    # if not defined, then the azure identity will be deployed in the same namespace as the chart
</span><span style=color:#a40000>-    namespace: &#34;&#34;
</span><span style=color:#a40000>-    # type 0: MSI, type 1: Service Principal
</span><span style=color:#a40000>-    type: 0
</span><span style=color:#a40000>-    # /subscriptions/subscription-id/resourcegroups/resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity-name
</span><span style=color:#a40000>-    resourceID: &#34;resource-id&#34;
</span><span style=color:#a40000>-    clientID: &#34;client-id&#34;
</span><span style=color:#a40000>-    binding:
</span><span style=color:#a40000>-      name: &#34;azure-identity-binding&#34;
</span><span style=color:#a40000>-      # The selector will also need to be included in labels for app deployment
</span><span style=color:#a40000>-      selector: &#34;demo&#34;
</span><span style=color:#a40000></span><span style=color:#00a000>+azureIdentities:
</span><span style=color:#00a000>+  &#34;azure-identity&#34;:
</span><span style=color:#00a000>+    # if not defined, then the azure identity will be deployed in the same namespace as the chart
</span><span style=color:#00a000>+    namespace: &#34;&#34;
</span><span style=color:#00a000>+    # type 0: MSI, type 1: Service Principal
</span><span style=color:#00a000>+    type: 0
</span><span style=color:#00a000>+    # /subscriptions/subscription-id/resourcegroups/resource-group/providers/Microsoft.ManagedIdentity/userAssignedIdentities/identity-name
</span><span style=color:#00a000>+    resourceID: &#34;resource-id&#34;
</span><span style=color:#00a000>+    clientID: &#34;client-id&#34;
</span><span style=color:#00a000>+    binding:
</span><span style=color:#00a000>+      name: &#34;azure-identity-binding&#34;
</span><span style=color:#00a000>+      # The selector will also need to be included in labels for app deployment
</span><span style=color:#00a000>+      selector: &#34;demo&#34;
</span></code></pre></div></li></ul><h3 id=v170>v1.7.0</h3><ul><li><p>With <a href=https://github.com/Azure/aad-pod-identity/pull/842>Azure/aad-pod-identity#842</a>, aad-pod-identity no longer works on clusters with kubenet as the network plugin. For more details, please see <a href=configure/aad_pod_identity_on_kubenet/>Deploy AAD Pod Identity in a Cluster with Kubenet</a>.</p><p>If you still wish to install aad-pod-identity on a kubenet-enabled cluster, set the helm chart value <code>nmi.allowNetworkPluginKubenet</code> to <code>true</code> in the helm command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>helm <span style=color:#ce5c00;font-weight:700>(</span>install<span style=color:#000;font-weight:700>|</span>upgrade<span style=color:#ce5c00;font-weight:700>)</span> ... --set nmi.allowNetworkPluginKubenet<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span> ...
</code></pre></div></li></ul><h3 id=v160>v1.6.0</h3><p>With <a href=https://github.com/Azure/aad-pod-identity/pull/398>Azure/aad-pod-identity#398</a>, the <a href=https://github.com/kubernetes/client-go>client-go</a> library is upgraded to v0.17.2, where CRD <a href=https://github.com/kubernetes/kubernetes/issues/64612>fields are now case sensitive</a>. If you are upgrading MIC and NMI from v1.x.x to v1.6.0, MIC v1.6.0+ will upgrade the fields of existing <code>AzureIdentity</code> and <code>AzureIdentityBinding</code> on startup to the new format to ensure backward compatibility. A configmap called <code>aad-pod-identity-config</code> is created to record and confirm the successful type upgrade.</p><p>However, for future <code>AzureIdentity</code> and <code>AzureIdentityBinding</code> created using v1.6.0+, the following fields need to be changed:</p><h3 id=azureidentity><code>AzureIdentity</code></h3><table><thead><tr><th>&lt; 1.6.0</th><th>>= 1.6.0</th></tr></thead><tbody><tr><td><code>ClientID</code></td><td><code>clientID</code></td></tr><tr><td><code>ClientPassword</code></td><td><code>clientPassword</code></td></tr><tr><td><code>ResourceID</code></td><td><code>resourceID</code></td></tr><tr><td><code>TenantID</code></td><td><code>tenantID</code></td></tr></tbody></table><h3 id=azureidentitybinding><code>AzureIdentityBinding</code></h3><table><thead><tr><th>&lt; 1.6.0</th><th>>= 1.6.0</th></tr></thead><tbody><tr><td><code>AzureIdentity</code></td><td><code>azureIdentity</code></td></tr><tr><td><code>Selector</code></td><td><code>selector</code></td></tr></tbody></table><h3 id=azurepodidentityexception><code>AzurePodIdentityException</code></h3><table><thead><tr><th>&lt; 1.6.0</th><th>>= 1.6.0</th></tr></thead><tbody><tr><td><code>PodLabels</code></td><td><code>podLabels</code></td></tr></tbody></table><h2 id=ready-to-get-started>Ready to get started?</h2><p>To get started, see the <a href=./getting-started/>Getting Started</a> page, or you can visit the <a href=https://github.com/Azure/aad-pod-identity>GitHub repo</a>.</p><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/aad-pod-identity/docs/getting-started/>Getting Started</a></h5><p>Setup the necessary role assignments on Azure before installing AAD Pod Identity.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/concepts/>Concepts</a></h5><p>The API of AAD Pod Identity CRDs and core components: Managed Identity Controller (MIC) and Node Managed Identity (NMI).</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/demo/>Demos</a></h5><p>We have created several demos for you to get familiar with AAD Pod Identity</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/configure/>Configurations</a></h5><p>An overview of all the features of AAD Pod Identity.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/best-practices/>Best Practices</a></h5><p>This document highlights the best practices when using aad-pod-identity.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/known-issues/>Known Issues</a></h5><p>This section lists the major known issues with aad-pod-identity.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/contributing/>Contributing</a></h5><p>The AAD Pod Identity project welcomes contributions and suggestions.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/troubleshooting/>Troubleshooting</a></h5><p>An overview of a list of components to assist in troubleshooting.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/support/>Support</a></h5><p>aad-pod-identity is an open source project that is not covered by the Microsoft Azure support policy.</p></div><div class=entry><h5><a href=/aad-pod-identity/docs/code-of-conduct/>Code of Conduct</a></h5><p>The code of conduct outlines expectations for participation in Microsoft-managed open source communities, as well as steps for reporting unacceptable behavior.</p></div></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/Azure/aad-pod-identity/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/Azure/aad-pod-identity/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified June 15, 2023: <a href=https://github.com/Azure/aad-pod-identity/commit/f8090f0305f198b19f0d4cb547a5695856afdcbc>Update _index.md (f8090f03)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/Azure/aad-pod-identity><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Azure Compute OSS Upstream Team All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/aad-pod-identity/js/main.min.664f21bf5eb0c31ebc661e2616e6c63e0448cec6d5636d869957be423c3cb952.js integrity="sha256-Zk8hv16wwx68Zh4mFubGPgRIzsbVY22GmVe+Qjw8uVI=" crossorigin=anonymous></script></body></html>