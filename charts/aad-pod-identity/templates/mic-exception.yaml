{{- if .Values.installMICException }}
{{- if eq .Values.operationMode "standard"}}
apiVersion: "aadpodidentity.k8s.io/v1"
kind: AzurePodIdentityException
metadata:
  name: mic
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "aad-pod-identity.labels" . | nindent 4 }}
spec:
  podLabels:
    app: mic
    component: mic
    app.kubernetes.io/component: mic
---
{{- end}}
apiVersion: "aadpodidentity.k8s.io/v1"
kind: AzurePodIdentityException
metadata:
  name: aks-addon-exception
  namespace: kube-system
  labels:
    {{- include "aad-pod-identity.labels" . | nindent 4 }}
spec:
  podLabels:
    kubernetes.azure.com/managedby: aks
{{- end }}
